<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/blog/component---src-templates-blog-post-js.e4c66166a7f063b243f8.css">.gatsby-highlight{background-color:#2d2d2d;border-radius:.3em;margin:2em 0;padding:1em;overflow:auto}.gatsby-highlight pre[class*=language-].line-numbers{padding:0 0 0 2.8em;overflow:initial}</style><style data-href="/blog/app.ab12e96a601961374afc.css">code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}</style><meta name="generator" content="Gatsby 2.0.111"/><link rel="canonical" href="https://brunoluiz.net/blog/2019/feb/a-guide-to-npm-package-publishing/" data-baseprotocol="https:" data-basehost="brunoluiz.net"/><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml"/><link rel="shortcut icon" href="/blog/icons/icon-48x48.png"/><link rel="manifest" href="/blog/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/blog/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/blog/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/blog/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/blog/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/blog/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/blog/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/blog/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/blog/icons/icon-512x512.png"/><title data-react-helmet="true">Bruno Luiz Blog | A guide on npm package publishing</title><meta data-react-helmet="true" name="description" content="If you are not new in the JavaScript world, you might have already heard about  npm . It is a package manager that let developers easily add packages to a…"/><meta data-react-helmet="true" property="og:title" content="A guide on npm package publishing"/><meta data-react-helmet="true" property="og:description" content="If you are not new in the JavaScript world, you might have already heard about  npm . It is a package manager that let developers easily add packages to a…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Bruno Luiz Silva"/><meta data-react-helmet="true" name="twitter:title" content="A guide on npm package publishing"/><meta data-react-helmet="true" name="twitter:description" content="If you are not new in the JavaScript world, you might have already heard about  npm . It is a package manager that let developers easily add packages to a…"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.78 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:300;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2.2974rem;line-height:2.67rem;letter-spacing:-2px;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}ul{margin-left:1.78rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.78rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;font-size:0.85rem;line-height:1.42;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.78rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;font-size:1rem;line-height:1.78rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}blockquote{margin-left:0;margin-right:1.78rem;margin-top:0;padding-bottom:0;padding-left:1.44625rem;padding-right:0;padding-top:0;margin-bottom:1.78rem;font-size:1.1487rem;line-height:1.78rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.33375rem solid hsla(0,0%,0%,0.2);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.78rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.78rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.78rem;margin-bottom:calc(1.78rem / 2);margin-top:calc(1.78rem / 2);}li > ul{margin-left:1.78rem;margin-bottom:calc(1.78rem / 2);margin-top:calc(1.78rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.78rem / 2);}code{font-size:0.85rem;line-height:1.78rem;}kbd{font-size:0.85rem;line-height:1.78rem;}samp{font-size:0.85rem;line-height:1.78rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.18667rem;padding-right:1.18667rem;padding-top:0.89rem;padding-bottom:calc(0.89rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;}pre code{background:none;line-height:1.42;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:none;}a{color:#f92300;text-decoration:none;}a:hover,a:active{text-decoration:underline;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.78rem;color:hsla(0,0%,0%,0.9);font-weight:300;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.78rem;}blockquote{margin-left:-1.335rem;margin-right:0;padding-left:1.00125rem;}}@media only screen and (max-width:768px){h1{font-size:2rem;line-height:2.67rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.56rem;}</style><link href="//fonts.googleapis.com/css?family=Open+Sans:700|Merriweather:300,300i,700,700i" rel="stylesheet" type="text/css"/><link as="script" rel="preload" href="/blog/webpack-runtime-1f30142c9850b433602c.js"/><link as="script" rel="preload" href="/blog/app-7e3dde47919f3ebaf59a.js"/><link as="script" rel="preload" href="/blog/0-9a508ada9a9934413220.js"/><link as="script" rel="preload" href="/blog/component---src-templates-blog-post-js-71a83892cadd6b63af52.js"/><link as="fetch" rel="preload" href="/blog/static/d/749/path---2019-feb-a-guide-to-npm-package-publishing-d-9-b-3e5-js60qe6K93B3Bq9MYpDL7Now.json" crossOrigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div style="margin-left:auto;margin-right:auto;max-width:42.72rem;padding:2.67rem 1.335rem"><header><h3 style="margin-top:0"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/blog/">Bruno Luiz Blog</a></h3></header><main><h1>A guide on npm package publishing</h1><p style="font-size:0.87055rem;line-height:1.78rem;display:block;margin-bottom:1.78rem;margin-top:-1.78rem">February 11, 2019</p><div><p>
  <a
    class="gatsby-resp-image-link"
    href="/blog/static/7240830101bed0c6205181bc5b9ef6fb/56447/header.jpeg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 720px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 64%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAQUAAAAAAAAAAAAAAAAAAAECAwQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwAC/9oADAMBAAIQAxAAAAFL2DOTOAs//8QAGhAAAgMBAQAAAAAAAAAAAAAAAgMAARIhI//aAAgBAQABBQJJBc8I0NNBmaF3S7f/xAAYEQACAwAAAAAAAAAAAAAAAAABAhASIf/aAAgBAwEBPwE1bTH/xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8BNLW//8QAGxAAAgIDAQAAAAAAAAAAAAAAAAERIQIiMTL/2gAIAQEABj8C3VFIycnDySf/xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMVFhcZH/2gAIAQEAAT8hugEdaYJMN+MLAbYjFG4ro+xW8p//2gAMAwEAAgADAAAAEDjP/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERQf/aAAgBAwEBPxCjQiP/xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QQ4EP/8QAGxABAQEAAgMAAAAAAAAAAAAAAREAIVExQbH/2gAIAQEAAT8QWdSip9HzVz+iGIMnQ87lBVqtwjt7ZVCLs3//2Q=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Photo by Paul Esch-Laurent on Unsplash"
        title=""
        src="/blog/static/7240830101bed0c6205181bc5b9ef6fb/cfe7c/header.jpeg"
        srcset="/blog/static/7240830101bed0c6205181bc5b9ef6fb/f39eb/header.jpeg 180w,
/blog/static/7240830101bed0c6205181bc5b9ef6fb/e1b9c/header.jpeg 360w,
/blog/static/7240830101bed0c6205181bc5b9ef6fb/cfe7c/header.jpeg 720w,
/blog/static/7240830101bed0c6205181bc5b9ef6fb/deb56/header.jpeg 1080w,
/blog/static/7240830101bed0c6205181bc5b9ef6fb/cf22f/header.jpeg 1440w,
/blog/static/7240830101bed0c6205181bc5b9ef6fb/56447/header.jpeg 1600w"
        sizes="(max-width: 720px) 100vw, 720px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>If you are not new in the JavaScript world, you might have already heard about <a href="https://www.npmjs.com/">npm</a>. It is a package manager that let developers easily add packages to a project, as <code>npm install hello-world</code>. But, have you ever asked “How do I create and publish my own packages”?</p>
<h2>How a package is composed?</h2>
<p>Packages are quite simple in JavaScript. A <code>package.json</code> and <code>index.js</code> can already do the job. Look at this micro package called <code>dedupe</code> for example:</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/blog/static/65610ff0a36065606864f3ca8d8ed672/486d0/dedupe.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 720px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 65.5625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACTklEQVQ4y52S227TQBCG/RDwCvAk5poqF/A4japK3FBVhdK0Occ52GklBII34YabukpQ1DaxncT2Hu39GTuhaiTKBSv9mrF359uZ2bGCyeSFkMkBgP2tqkzmVa5MVWpUVY6qNqjm+Lt0jn2lzL7SOAij+KV1dHT85vOXr+iPPPQGLpyhi1bXQccZot0bYOBdoTf00Og4qLd7aJJtbNXs9FG7aKJ23kLPGeDg8PCtdXJ69npIQQN3LAkia62+OmsNVbM3Us5go25/qOgS1ez01Gmtrs4bLXV20VC1elM12l3ZHYwkncHR8cmetVgs9rBZVAHMf6qIRRCEFcv3/RKY05KSmzCcY70KwNganJRpDimSUloxsHRNlpc+FzF0Jk2W5SXQv7mpWJPJ5CFDxmIzX0wRhDNEy1sIEUHKZWk5DxFGM9zT/jK8xc+7H/juf4O/8h8yJNYuMFim5td9jFWqEMUSMc/AJCAzQGgglQZMofwfJQKzaEW+eBrIpTZ3K1V+MM4oowhJkiDLiGYoxpiNyrbRmZTK/hcwpeGbhRxFS9ZJirt5gCTlUDRkSmc70lmG5TpGyvjTQKEyE8Ta6MwYRdPKhTB5bnZe9PFKGTNCyl3gdDr9AzRFyfOVQE5HJGUlhISQiiTpRTc+XYDiDuIV2dGjqYceEKtiXV9f7xWbWmsTU78WiwAp9SZhKQWwMuixGBdF30qVvhAoqimAxKpY9Xr9meu6r0ajke15ru04jv3x0wf7feOdfXU5ti/HW239seeV8raWYu0itmAQ6/lvWLaOptvJ26YAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="dedupe repository"
        title=""
        src="/blog/static/65610ff0a36065606864f3ca8d8ed672/5b758/dedupe.png"
        srcset="/blog/static/65610ff0a36065606864f3ca8d8ed672/e6885/dedupe.png 180w,
/blog/static/65610ff0a36065606864f3ca8d8ed672/e17e9/dedupe.png 360w,
/blog/static/65610ff0a36065606864f3ca8d8ed672/5b758/dedupe.png 720w,
/blog/static/65610ff0a36065606864f3ca8d8ed672/a00f5/dedupe.png 1080w,
/blog/static/65610ff0a36065606864f3ca8d8ed672/74039/dedupe.png 1440w,
/blog/static/65610ff0a36065606864f3ca8d8ed672/486d0/dedupe.png 1600w"
        sizes="(max-width: 720px) 100vw, 720px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>There are other useful files such as <code>.gitignore</code> and <code>.npmignore</code>, <code>LICENSE</code> and <code>README.md</code>, but the main ones are there: <code>package.json</code> and <code>index.js</code>.  Having these, the package just need to be published in a repository, such as the <a href="https://www.npmjs.com/">npm public</a>. Through this guide, you will be able to have a simple package created and published on npm.</p>
<h2>Create a npm package</h2>
<p>While doing <a href="https://apimock.in">apimock.in</a>, I had to create multiple serverless stacks. Each have error handlers and, as most of the errors are quite the same, one strategy is to extract these definitions into a package and just install it on each serverless stack. I will use this case as the example through this post.</p>
<h3>Create a npmjs.com account</h3>
<p>Before doing anything, an account on <a href="https://npmjs.com">npmjs.com</a> is required for publishing a package. This is the website for the npm public repository, the one which is used when  <code>npm install ...</code> is executed.</p>
<p>To create an account, go to <a href="https://www.npmjs.com/signup">npm signup page</a> and fill up the informations. After finishing the process, a test can be done using <code>npm login</code> and <code>npm whoami</code>. Has it output your username? Great! It is working!</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*sUm176ELamVqjUF1GUpiVw.gif"></p>
<h3>Some words about scopes</h3>
<p>Scopes are useful in many ways, although not strictly required to publish a npm package. Every npm user has its own scope, defined as the npm user name.</p>
<p>As only the developer/company can publish to its own scope, it is quite useful to indicate it is an official package. For example, one can publish a package called <code>xyz-sdk</code>, but another called <code>xyz</code> might already exist. How one would now which to install? What if <code>xyz</code> mimics <code>xyz-sdk</code>, but with malicious code?</p>
<blockquote>
<p>Each npm user/organisation has their own scope, and only you can add packages in your scope. This means you don’t have to worry about someone taking your package name ahead of you. Thus it is also a good way to signal official packages for organisations. (<a href="https://docs.npmjs.com/misc/scope">from npm-scopes documentation</a>)</p>
</blockquote>
<p>A scoped package would have  a <code>@account</code> prefix. It would be published as <code>@account/xyz-sdk</code>, hence easily identifiable as from a specific developer. Besides, the developer don’t have to worry about name clashing, as the scope is account specific. It can be configured to point to a private repository as well,
making it specially useful for companies.</p>
<p>There are <a href="https://docs.npmjs.com/misc/scope">more information about scopes here</a>. Keep in mind it is a good practice to scope packages.</p>
<h3>Create a simple package structure</h3>
<p>In an empty folder, run <code>npm init —-scope=@your-npm-user</code>. This will setup a <code>package.json</code> and ask for some informations, such as name, version, main entry file and author. The end result will be something as the following.</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">{
  &quot;name&quot;: &quot;@brunoluiz/jsonapi-errors&quot;,
  &quot;version&quot;: &quot;0.1.0&quot;,
  &quot;description&quot;: &quot;JSONAPI Common Errors&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;jest&quot;
  },
  &quot;author&quot;: &quot;Bruno Luiz da Silva &lt;contact@brunoluiz.net&gt; (http://brunoluiz.net/)&quot;,
  &quot;license&quot;: &quot;MIT&quot;
}</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>After having it initialised, is time to code something. Develop a basic implementation of it in the specified main file on <code>npm init</code> setup (usually <code>index.js</code>). If the package require dependencies or there are files to be ignored on publishing, add a <code>.gitignore</code> with what should be ignored (eg: <code>node_modules</code>).</p>
<p>It is suggested to add a <code>LICENSE.md</code> and a <code>README.md</code>, as other developers might use this package. For more informations about licensing, check <a href="https://choosealicense.com/">choosealicense.com</a>.</p>
<h3>Publish the package</h3>
<p>The basic implementation is done and now is time to deploy it! For the first publish, a <code>npm publish -—access=public</code> is required. The <code>access=public</code> param is needed as, by default, it tries to do it as private. On following publishings, a <code>npm publish</code> will do the job.</p>
<p>Congratulations! You published your first package on npm. It should be available at <code>https://npmjs.com/package/@your-npm-user/package-name</code> and ready to be installed through <code>npm install @your-npm-user/package-name</code>.</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*oltzIY-eP8kDiK7mIlUVIQ.gif"></p>
<h3>Releasing new versions</h3>
<p>After some iterations, the package might need new features. In the example above, <code>jsonapi-errors</code> only have a <code>index.js</code> which prints a “hello world” (quite useless). After adding a real implementation, a version bump is required.</p>
<p>NPM packages uses semantic versioning. The is <a href="https://semver.org/">more information about it here</a>, but in a nutshell:</p>
<blockquote>
<p>MAJOR version when you make incompatible API changes,</p>
<p>MINOR version when you add functionality in a backwards-compatible manner, and</p>
<p>PATCH version when you make backwards-compatible bug fixes.</p>
</blockquote>
<p>In the <code>jsonapi-errors</code> example, a minor version increment is required. To do this, a <code>npm version minor</code> can be used, where it will bump the <code>package.json</code> version and add a git commit + tag. Then, a <code>npm publish</code> will take care of pushing it (no need for <code>access</code> parameter now).</p>
<p>There are <a href="https://docs.npmjs.com/cli/version.html">more information about the versioning process here</a>.</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*gg3mGMbiQMFB7FKQQi8NzQ.gif"></p>
<h3>Testing on projects and going beyond npm install</h3>
<p>A simple way to test the shinny new package is through <code>npm install</code>. It will work as expected but, if a change is required, a new version has to be published and the project dependency has to be upgraded to use the new one.</p>
<p>This is unproductive, specially when a package is new and changes happen quite often. A way to solve it is through <code>npm link</code>: it creates a symbolic link of the package, inside the project <code>node_modules</code> folder, where it will use the local version of the module.</p>
<p>&#x3C; … to be developed … ></p>
<h2>Automate publishing process using CircleCI</h2>
<p>If a package have many people collaborating to it, or the deploy process require many extra steps besides publishing it, perhaps an automated setup can improve the workflow. I prefer to use CircleCI, but there are other options such as TravisCI and GitLab CI.</p>
<p>On CircleCI Blog there is a <a href="https://circleci.com/blog/publishing-npm-packages-using-circleci-2-0/">complete article explaining how to do it</a>. The final configuration will enable to:</p>
<ol>
<li>On feature branches, it will just run tests (eg: run tests on pull requests)</li>
<li>On git <code>v*.*.*</code> tag pushes, it will run tests and then publish to the NPM repository  —  remembering, a git version tag is generated by <code>npm version</code> </li>
</ol>
<p>More configurations can be added, such as saving coverage reports to a bucket or triggering specific web hooks after the jobs (eg: Slack).</p>
<h2>Where to go now?</h2>
<p>The steps shown in this article will cover most basic necessities on npm package publishing, but there are some specifics I haven’t covered in this article.</p>
<ol>
<li><strong>Publish the package as TypeScript:</strong> this allows code typing, more robust codes and, in editors such as VS Code, it enables a batter IntelliSense. <a href="https://itnext.io/step-by-step-building-and-publishing-an-npm-typescript-package-44fe7164964c">There is a quite complete article on
ITNext</a>.</li>
<li><strong>Publish it to a private repository:</strong> there are some small different configurations, as pointing the package scope to the private repository. <a href="https://docs.npmjs.com/creating-and-publishing-private-packages">Give a look in this npm article</a>.</li>
</ol></div><hr style="margin-bottom:1.78rem"/><div style="display:flex;margin-bottom:4.45rem"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:50px;height:50px;margin-right:0.89rem;margin-bottom:0;min-width:50px;border-radius:100%"><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB5TsqPWYhCIZwf//EAB0QAAICAQUAAAAAAAAAAAAAAAECAAMQERITITP/2gAIAQEAAQUCdm0TnqtIET13q1hsix+8f//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EAB4QAAIBAwUAAAAAAAAAAAAAAAERAgAQIRIiMTJB/9oACAEBAAY/AjCHaoai2UQ7Tw9tAEDBbs/a4t//xAAcEAADAAIDAQAAAAAAAAAAAAAAAREhMUFhcYH/2gAIAQEAAT8hXoVPhq2VkirZDqkVGJDB0pyVdNfInNpehn//2gAMAwEAAgADAAAAEDPIPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABwQAQADAQADAQAAAAAAAAAAAAEAESExQWFx8P/aAAgBAQABPxAycATEL2/3Ydw8L6WtPHY/cWD0AGqyenEg2hf2Co4wl6gtNdyBAkK2K8R05nyf/9k=" alt="Bruno Luiz Silva" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s;border-radius:50%"/><noscript><picture><source srcSet="/blog/static/1bc3bc127b6330fdc88c2211310fe75a/d2d31/profile-pic.jpg 1x,
/blog/static/1bc3bc127b6330fdc88c2211310fe75a/0b804/profile-pic.jpg 1.5x,
/blog/static/1bc3bc127b6330fdc88c2211310fe75a/753c3/profile-pic.jpg 2x,
/blog/static/1bc3bc127b6330fdc88c2211310fe75a/31ca8/profile-pic.jpg 3x" /><img width="50" height="50" src="/blog/static/1bc3bc127b6330fdc88c2211310fe75a/d2d31/profile-pic.jpg" alt="Bruno Luiz Silva" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><p>Personal Blog by <strong>Bruno Luiz Silva</strong><br/>A collection of my random thoughts</p></div><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0;margin-left:0"><li><a rel="prev" href="/blog/2018/mar/a-tale-of-how-to-not-deploy-two-months-old-features/">← <!-- -->A Tale Of How To Not Deploy Two Months Old Features</a></li><li></li></ul></main><footer><a href="https://twitter.com/brunoluiz">twitter</a> • <a href="https://github.com/brunoluiz">github</a></footer></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'undefined', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"2019-feb-a-guide-to-npm-package-publishing-d9b","path":"/2019/feb/a-guide-to-npm-package-publishing/"};window.dataPath="749/path---2019-feb-a-guide-to-npm-package-publishing-d-9-b-3e5-js60qe6K93B3Bq9MYpDL7Now";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.ab12e96a601961374afc.css","/app-7e3dde47919f3ebaf59a.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-ea57f3a7784af0b7bbe7.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js.e4c66166a7f063b243f8.css","/component---src-templates-blog-post-js-71a83892cadd6b63af52.js"],"component---src-pages-404-js":["/component---src-pages-404-js.e4c66166a7f063b243f8.css","/component---src-pages-404-js-8a48b0c62a7793c0c7ad.js"],"component---src-pages-index-js":["/component---src-pages-index-js.e4c66166a7f063b243f8.css","/component---src-pages-index-js-d5cba7b931ed66a208eb.js"],"pages-manifest":["/pages-manifest-f6b8330b7812c1581578.js"]};/*]]>*/</script><script src="/blog/component---src-templates-blog-post-js-71a83892cadd6b63af52.js" async=""></script><script src="/blog/0-9a508ada9a9934413220.js" async=""></script><script src="/blog/app-7e3dde47919f3ebaf59a.js" async=""></script><script src="/blog/webpack-runtime-1f30142c9850b433602c.js" async=""></script></body></html>